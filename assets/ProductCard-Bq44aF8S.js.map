{"version":3,"file":"ProductCard-Bq44aF8S.js","sources":["../../../src/esf_thehague_schinsleder/core/components/Rating.vue","../../../src/esf_thehague_schinsleder/core/components/ProductCard.vue"],"sourcesContent":["<template>\r\n    <div class=\"ratings d-none d-md-flex align-items-center\">\r\n      <ul class=\"ratings-star\">\r\n        <li\r\n          v-for=\"(isFill, idx) of rateStars\"\r\n          :key=\"idx\"\r\n          :class=\"isFill ? 'text-yellow' : 'text-gray'\"\r\n        >\r\n          <i class=\"lnr lnr-star\"></i>\r\n        </li>\r\n      </ul>\r\n      <span class=\"no-of-ratings\">({{ noOfRatings }})</span>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { computed } from \"vue\";\r\n  \r\n  const props = defineProps({\r\n    stars: {\r\n      type: Number,\r\n    },\r\n    noOfRatings: {\r\n      type: Number,\r\n    },\r\n  });\r\n  \r\n  const rateStars = computed(() => new Array(5).fill(false).map((_, i) => i < props.stars / 10 / 2));\r\n  </script>\r\n  ","<template>\r\n    <div class=\"product-card--holder\">\r\n        <BLink class=\"add-to-wishlist\" @click.prevent=\"toggleWishItem\">\r\n            <font-awesome-icon v-if=\"$store.getters['user/isProductInWishlist'](product.sku)\" class=\"heart d-none d-sm-block text-secondary\" :icon=\"['fas', 'heart']\" />\r\n            <font-awesome-icon v-else class=\"heart d-none d-sm-block\" :icon=\"['fat', 'heart']\" />\r\n        </BLink>\r\n        <router-link :to=\"`/${product.url_key}`\" class=\"product-card\" @click=\"trackClick\">\r\n            <div>\r\n                <img class=\"product-card--img-top\" :class=\"route.name === 'home' ? 'width-unset' : ''\"\r\n                    :src=\"mediumImage\" :alt=\"product.name\" width=\"240\" height=\"220\" v-if=\"product.image && mediumImage\"\r\n                    @error=\"setDefaultPlaceholder\" />\r\n                <img class=\"product-card--img-top\" width=\"240\" height=\"220\" v-else\r\n                    :alt=\"product.name ? product.name : 'Product Card Image'\"\r\n                    src=\"@/base/assets/default-placeholder-image.jpg\" />\r\n                <div class=\"actionbuttons\">\r\n                    <span class=\"sale-txt\" v-if=\"product.sale\">Sale</span>\r\n                    <span class=\"new-txt\" v-if=\"product.new\">Nieuw</span>\r\n                    <!-- <span class=\"empty-txt\" v-if=\"!product.new && !product.sale\"></span> -->\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"product-name lh-1\">{{ product.name }}</div>\r\n            <div class=\"product-info\">\r\n                <div class=\"product-info-item\">\r\n                    <font-awesome-icon :icon=\"['fas', 'circle-info']\" class=\"font-aws-icon\"/>\r\n                    <span class=\"product-info-text\">{{$t (\"Product_information\")}}</span>\r\n                </div>\r\n                <div class=\"product-info-sec \">\r\n                    <font-awesome-icon :icon=\"['fas', 'circle-info']\" class=\"font-aws-icon\"/>\r\n                    <span class=\"product-info-text\">{{$t(\"Product_Specification\")}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- <ul v-for=\"attr of product.configurable_options\" :key=\"attr.id\"\r\n                class=\"available-sizes-list d-none d-md-flex flex-wrap justify-content-center list-unstyled p-0\">\r\n                <li v-for=\"opt of attr.values\" :key=\"opt.value_index\">\r\n                    {{ opt.label }}\r\n                </li>\r\n            </ul> -->\r\n            <!-- <ul v-if=\"!product.configurable_options\"\r\n                class=\"available-sizes-list d-none d-md-flex flex-wrap justify-content-center list-unstyled p-0\"></ul> -->\r\n            <div class=\"bottombox\">\r\n                <Rating :stars=\"product.rating_summary\" :noOfRatings=\"product.review_count\"\r\n                    v-if=\"product.review_count > 0\" />\r\n                    <span v-if=\"isLoggedIn\" v-html=\"getProductPriceRange.text\" class=\"d-block product-card-price\"> </span>\r\n                    <span v-else class=\"login-see-price\">{{ $t(\"login_see_price\") }}</span>\r\n                    <span class=\"d-block product-card--sale-comment\"\r\n                    v-if=\"product.price_range.minimum_price.discount.percent_off > 0\">\r\n                    {{ $t(\"discount\") }}\r\n                    {{ product.price_range.minimum_price.discount.percent_off.toFixed(0) }}%\r\n                </span>\r\n                <span class=\"d-block product-card--sale-comment\" style=\"visibility: hidden\"\r\n                    v-if=\"product.price_range.minimum_price.discount.percent_off == 0\">\r\n                    {{ $t(\"discount\") }}\r\n                    {{ product.price_range.minimum_price.discount.percent_off.toFixed(0) }}%\r\n                </span>\r\n                <div :class=\"getBottomMargin\"></div>\r\n            </div>\r\n\r\n            <ProductAddtoCart v-if=\"isLoggedIn\" :product=\"product\" :addedQuantity=\"(qty) => (quantity = qty)\" />\r\n\r\n        </router-link>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, nextTick, onMounted, ref } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport Rating from \"@/esf_thehague_schinsleder/core/components/Rating.vue\";\r\nimport config from \"@config\";\r\nimport ProductAddtoCart from \"@/esf_thehague_schinsleder/core/components/product/ProductAddtoCart.vue\";\r\n\r\nconst props = defineProps({\r\n    product: {\r\n        type: Object,\r\n        require: true,\r\n    },\r\n    optionHeight: {\r\n        type: Number,\r\n        require: true,\r\n    },\r\n});\r\n\r\nfunction formatCurrency(amount) {\r\n    const formatter = new Intl.NumberFormat(\"nl-NL\", {\r\n        style: \"currency\",\r\n        currency: \"EUR\",\r\n    });\r\n    return formatter.format(amount);\r\n}\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst store = useStore();\r\nconst { t } = useI18n();\r\n\r\nconst mediumImage = ref(props.product.image.medium);\r\nconst isLoggedIn = computed(() => store.getters[\"user/getIsLoggedIn\"]);\r\n\r\nconst getBottomMargin = computed(() => {\r\n    if (\r\n        (props.product.sale == 1 || props.product.new == 1) &&\r\n        (props.product.price_range.minimum_price.discount.percent_off > 0 ||\r\n            props.product.price_range.maximum_price.discount.percent_off > 0)\r\n    ) {\r\n        return \"m20\";\r\n    } else {\r\n        return \"\";\r\n    }\r\n});\r\n\r\nconst productConfig = computed(() => {\r\n    return { variants: props.product.variants };\r\n});\r\n\r\n// const awSource = computed(() => {\r\n//   return store.getters[\"home/getAwSource\"];\r\n// });\r\n\r\nconst getProductPriceRange = computed(() => {\r\n    if (props.product.__typename == \"SimpleProduct\") {\r\n        return {\r\n            text:\r\n                '<span class=\"currentPrice\">' +\r\n                formatCurrency(props.product.price_range.maximum_price.final_price.value) +\r\n                \"</span>\",\r\n            discountType: 1,\r\n        };\r\n    } else if (props.product.__typename == \"BundleProduct\") {\r\n        let lowestPrice = props.product.price_range.minimum_price.final_price.value;\r\n        let highestPrice = props.product.price_range.maximum_price.final_price.value;\r\n        if (lowestPrice == highestPrice) {\r\n            if (lowestPrice === props.product.price_range.maximum_price.regular_price.value) {\r\n                // Return only the current price if both conditions are met\r\n                return {\r\n                    text:\r\n                        '<span class=\"currentPrice\">' +\r\n                        formatCurrency(props.product.price_range.maximum_price.final_price.value) +\r\n                        \"</span>\",\r\n                    discountType: 1,\r\n                };\r\n            } else {\r\n                // Return both strike-through and current price if only lowestPrice === highestPrice\r\n                return {\r\n                    text:\r\n                        '<span class=\"strike\">' +\r\n                        formatCurrency(props.product.price_range.maximum_price.regular_price.value) +\r\n                        '</span> <span class=\"currentPrice\">' +\r\n                        formatCurrency(lowestPrice) +\r\n                        \"</span>\",\r\n                    discountType: 1,\r\n                };\r\n            }\r\n        } else {\r\n            return {\r\n                text:\r\n                    '<span class=\"currentPrice\">' +\r\n                    formatCurrency(lowestPrice) +\r\n                    \" - \" +\r\n                    formatCurrency(highestPrice) +\r\n                    \"</span>\",\r\n                discountType: 2,\r\n            };\r\n        }\r\n    } else {\r\n        if (productConfig.value) {\r\n            let lowestPrice = props.product.price_range.maximum_price.regular_price.value;\r\n            let highestPrice = props.product.price_range.minimum_price.final_price.value;\r\n            if (productConfig.value.variants) {\r\n                productConfig.value.variants.forEach((v) => {\r\n                    if (v.product.price_range.minimum_price.final_price.value < lowestPrice) {\r\n                        lowestPrice = v.product.price_range.minimum_price.final_price.value;\r\n                    }\r\n                    if (v.product.price_range.maximum_price.final_price.value > highestPrice) {\r\n                        highestPrice = v.product.price_range.maximum_price.final_price.value;\r\n                    }\r\n                });\r\n            }\r\n            if (\r\n                lowestPrice == highestPrice &&\r\n                lowestPrice !== props.product.price_range.maximum_price.regular_price.value\r\n            ) {\r\n                return {\r\n                    text:\r\n                        '<span class=\"strike\">' +\r\n                        formatCurrency(props.product.price_range.maximum_price.regular_price.value) +\r\n                        '</span> <span class=\"currentPrice\">' +\r\n                        formatCurrency(lowestPrice) +\r\n                        \"</span>\",\r\n                    discountType: 1,\r\n                };\r\n            } else if (lowestPrice !== highestPrice) {\r\n                return {\r\n                    text:\r\n                        '<span class=\"currentPrice\">' +\r\n                        formatCurrency(lowestPrice) +\r\n                        \" / \" +\r\n                        formatCurrency(highestPrice) +\r\n                        \"</span>\",\r\n                    discountType: 2,\r\n                };\r\n            } else {\r\n                return {\r\n                    text: '<span class=\"currentPrice\">' + formatCurrency(lowestPrice) + \"</span>\",\r\n                    discountType: 1,\r\n                };\r\n            }\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n});\r\n\r\nfunction toggleWishItem() {\r\n    if (store.getters[\"user/getIsLoggedIn\"] == true) {\r\n        if (store.getters[\"user/isProductInWishlist\"](props.product.sku) == true) {\r\n            store.dispatch(\"user/setProductWishlistStatus\", {\r\n                sku: props.product.sku,\r\n                parentSku: null,\r\n                store: store,\r\n            });\r\n        } else {\r\n            if (props.product.__typename == \"SimpleProduct\") {\r\n                store.dispatch(\"user/setProductWishlistStatus\", {\r\n                    sku: props.product.sku,\r\n                    parentSku: null,\r\n                    store: store,\r\n                });\r\n            } else {\r\n                const msg = {\r\n                    type: \"danger\",\r\n                    title: t(\"wishlist error\"),\r\n                    text: t(\"wishlist_select_options\"),\r\n                };\r\n                store.dispatch(\"messages/sendMessage\", { message: msg });\r\n                router.push(\"/\" + props.product.url_key);\r\n            }\r\n        }\r\n    } else {\r\n        const msg = {\r\n            type: \"danger\",\r\n            title: t(\"wishlist error\"),\r\n            text: t(\"wishlist_logged_in\"),\r\n        };\r\n        store.dispatch(\"messages/sendMessage\", { message: msg });\r\n    }\r\n}\r\n\r\nfunction setDefaultPlaceholder() {\r\n    mediumImage.value = null;\r\n}\r\n\r\nfunction trackClick() {\r\n    if (typeof window !== \"undefined\") {\r\n        if (config.helloRetail && config.helloRetail.enabled) {\r\n            const aw_source = JSON.parse(localStorage.getItem(\"aw_source\")) ?? [];\r\n            const found = aw_source.find(({ sku }) => sku == props.product.sku);\r\n            const hrq = window.hrq || [];\r\n            hrq.push([\"trackClick\", found?.aw_source]);\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nonMounted(() => {\r\n    nextTick(() => {\r\n        const maxHeight = Math.max(\r\n            ...(Array.from(document.querySelectorAll(`.available-sizes-list`))?.map((ele) =>\r\n                Number(ele.offsetHeight)\r\n            ) || [])\r\n        );\r\n        document.querySelectorAll(`.available-sizes-list`)?.forEach((ele) => {\r\n            ele.style.minHeight = maxHeight + \"px\";\r\n        });\r\n    });\r\n});\r\n</script>"],"names":["config"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAkBE,UAAM,QAAQ;AASd,UAAM,YAAY,SAAS,MAAM,IAAI,MAAM,CAAC,EAAE,KAAK,KAAK,EAAE,IAAI,CAAC,GAAG,MAAM,IAAI,MAAM,QAAQ,KAAK,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+CnG,UAAM,QAAQ;AAWd,aAAS,eAAe,QAAQ;AAC5B,YAAM,YAAY,IAAI,KAAK,aAAa,SAAS;AAAA,QAC7C,OAAO;AAAA,QACP,UAAU;AAAA,MAClB,CAAK;AACD,aAAO,UAAU,OAAO,MAAM;AAAA,IAClC;AACA,UAAM,SAAS,UAAS;AACxB,UAAM,QAAQ,SAAQ;AACtB,UAAM,QAAQ,SAAQ;AACtB,UAAM,EAAE,EAAC,IAAK;AAEd,UAAM,cAAc,IAAI,MAAM,QAAQ,MAAM,MAAM;AAClD,UAAM,aAAa,SAAS,MAAM,MAAM,QAAQ,oBAAoB,CAAC;AAErE,UAAM,kBAAkB,SAAS,MAAM;AACnC,WACK,MAAM,QAAQ,QAAQ,KAAK,MAAM,QAAQ,OAAO,OAChD,MAAM,QAAQ,YAAY,cAAc,SAAS,cAAc,KAC5D,MAAM,QAAQ,YAAY,cAAc,SAAS,cAAc,IACrE;AACE,eAAO;AAAA,MACf,OAAW;AACH,eAAO;AAAA,MACV;AAAA,IACL,CAAC;AAED,UAAM,gBAAgB,SAAS,MAAM;AACjC,aAAO,EAAE,UAAU,MAAM,QAAQ,SAAQ;AAAA,IAC7C,CAAC;AAMD,UAAM,uBAAuB,SAAS,MAAM;AACxC,UAAI,MAAM,QAAQ,cAAc,iBAAiB;AAC7C,eAAO;AAAA,UACH,MACI,gCACA,eAAe,MAAM,QAAQ,YAAY,cAAc,YAAY,KAAK,IACxE;AAAA,UACJ,cAAc;AAAA,QAC1B;AAAA,MACK,WAAU,MAAM,QAAQ,cAAc,iBAAiB;AACpD,YAAI,cAAc,MAAM,QAAQ,YAAY,cAAc,YAAY;AACtE,YAAI,eAAe,MAAM,QAAQ,YAAY,cAAc,YAAY;AACvE,YAAI,eAAe,cAAc;AAC7B,cAAI,gBAAgB,MAAM,QAAQ,YAAY,cAAc,cAAc,OAAO;AAE7E,mBAAO;AAAA,cACH,MACI,gCACA,eAAe,MAAM,QAAQ,YAAY,cAAc,YAAY,KAAK,IACxE;AAAA,cACJ,cAAc;AAAA,YAClC;AAAA,UACA,OAAmB;AAEH,mBAAO;AAAA,cACH,MACI,0BACA,eAAe,MAAM,QAAQ,YAAY,cAAc,cAAc,KAAK,IAC1E,wCACA,eAAe,WAAW,IAC1B;AAAA,cACJ,cAAc;AAAA,YAClC;AAAA,UACa;AAAA,QACb,OAAe;AACH,iBAAO;AAAA,YACH,MACI,gCACA,eAAe,WAAW,IAC1B,QACA,eAAe,YAAY,IAC3B;AAAA,YACJ,cAAc;AAAA,UAC9B;AAAA,QACS;AAAA,MACT,OAAW;AACH,YAAI,cAAc,OAAO;AACrB,cAAI,cAAc,MAAM,QAAQ,YAAY,cAAc,cAAc;AACxE,cAAI,eAAe,MAAM,QAAQ,YAAY,cAAc,YAAY;AACvE,cAAI,cAAc,MAAM,UAAU;AAC9B,0BAAc,MAAM,SAAS,QAAQ,CAAC,MAAM;AACxC,kBAAI,EAAE,QAAQ,YAAY,cAAc,YAAY,QAAQ,aAAa;AACrE,8BAAc,EAAE,QAAQ,YAAY,cAAc,YAAY;AAAA,cACjE;AACD,kBAAI,EAAE,QAAQ,YAAY,cAAc,YAAY,QAAQ,cAAc;AACtE,+BAAe,EAAE,QAAQ,YAAY,cAAc,YAAY;AAAA,cAClE;AAAA,YACrB,CAAiB;AAAA,UACJ;AACD,cACI,eAAe,gBACf,gBAAgB,MAAM,QAAQ,YAAY,cAAc,cAAc,OACxE;AACE,mBAAO;AAAA,cACH,MACI,0BACA,eAAe,MAAM,QAAQ,YAAY,cAAc,cAAc,KAAK,IAC1E,wCACA,eAAe,WAAW,IAC1B;AAAA,cACJ,cAAc;AAAA,YAClC;AAAA,UACA,WAAuB,gBAAgB,cAAc;AACrC,mBAAO;AAAA,cACH,MACI,gCACA,eAAe,WAAW,IAC1B,QACA,eAAe,YAAY,IAC3B;AAAA,cACJ,cAAc;AAAA,YAClC;AAAA,UACA,OAAmB;AACH,mBAAO;AAAA,cACH,MAAM,gCAAgC,eAAe,WAAW,IAAI;AAAA,cACpE,cAAc;AAAA,YAClC;AAAA,UACa;AAAA,QACb,OAAe;AACH,iBAAO;AAAA,QACV;AAAA,MACJ;AAAA,IACL,CAAC;AAED,aAAS,iBAAiB;AACtB,UAAI,MAAM,QAAQ,oBAAoB,KAAK,MAAM;AAC7C,YAAI,MAAM,QAAQ,0BAA0B,EAAE,MAAM,QAAQ,GAAG,KAAK,MAAM;AACtE,gBAAM,SAAS,iCAAiC;AAAA,YAC5C,KAAK,MAAM,QAAQ;AAAA,YACnB,WAAW;AAAA,YACX;AAAA,UAChB,CAAa;AAAA,QACb,OAAe;AACH,cAAI,MAAM,QAAQ,cAAc,iBAAiB;AAC7C,kBAAM,SAAS,iCAAiC;AAAA,cAC5C,KAAK,MAAM,QAAQ;AAAA,cACnB,WAAW;AAAA,cACX;AAAA,YACpB,CAAiB;AAAA,UACjB,OAAmB;AACH,kBAAM,MAAM;AAAA,cACR,MAAM;AAAA,cACN,OAAO,EAAE,gBAAgB;AAAA,cACzB,MAAM,EAAE,yBAAyB;AAAA,YACrD;AACgB,kBAAM,SAAS,wBAAwB,EAAE,SAAS,IAAK,CAAA;AACvD,mBAAO,KAAK,MAAM,MAAM,QAAQ,OAAO;AAAA,UAC1C;AAAA,QACJ;AAAA,MACT,OAAW;AACH,cAAM,MAAM;AAAA,UACR,MAAM;AAAA,UACN,OAAO,EAAE,gBAAgB;AAAA,UACzB,MAAM,EAAE,oBAAoB;AAAA,QACxC;AACQ,cAAM,SAAS,wBAAwB,EAAE,SAAS,IAAK,CAAA;AAAA,MAC1D;AAAA,IACL;AAEA,aAAS,wBAAwB;AAC7B,kBAAY,QAAQ;AAAA,IACxB;AAEA,aAAS,aAAa;AAClB,UAAI,OAAO,WAAW,aAAa;AAC/B,YAAIA,YAAO,eAAeA,YAAO,YAAY,SAAS;AAClD,gBAAM,YAAY,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,KAAK;AACnE,gBAAM,QAAQ,UAAU,KAAK,CAAC,EAAE,UAAU,OAAO,MAAM,QAAQ,GAAG;AAClE,gBAAM,MAAM,OAAO,OAAO;AAC1B,cAAI,KAAK,CAAC,cAAc,+BAAO,SAAS,CAAC;AAAA,QAC5C;AAAA,MACJ;AACD,aAAO;AAAA,IACX;AAEA,cAAU,MAAM;AACZ,eAAS,MAAM;;AACX,cAAM,YAAY,KAAK;AAAA,UACnB,KAAI,WAAM,KAAK,SAAS,iBAAiB,uBAAuB,CAAC,MAA7D,mBAAgE;AAAA,YAAI,CAAC,QACrE,OAAO,IAAI,YAAY;AAAA,gBACtB;QACjB;AACQ,uBAAS,iBAAiB,uBAAuB,MAAjD,mBAAoD,QAAQ,CAAC,QAAQ;AACjE,cAAI,MAAM,YAAY,YAAY;AAAA,QAC9C;AAAA,MACA,CAAK;AAAA,IACL,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}