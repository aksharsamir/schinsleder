{"version":3,"file":"ProductCard-zGPQ-XdA.js","sources":["../../../src/base/core/components/Rating.vue","../../../src/base/core/components/ProductCard.vue"],"sourcesContent":["<template>\r\n  <div class=\"ratings d-none d-md-flex align-items-center\">\r\n    <ul class=\"ratings-star\">\r\n      <li\r\n        v-for=\"(isFill, idx) of rateStars\"\r\n        :key=\"idx\"\r\n        :class=\"isFill ? 'text-yellow' : 'text-gray'\"\r\n      >\r\n        <i class=\"lnr lnr-star\"></i>\r\n      </li>\r\n    </ul>\r\n    <span class=\"no-of-ratings\">({{ noOfRatings }})</span>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from \"vue\";\r\n\r\nconst props = defineProps({\r\n  stars: {\r\n    type: Number,\r\n  },\r\n  noOfRatings: {\r\n    type: Number,\r\n  },\r\n});\r\n\r\nconst rateStars = computed(() => new Array(5).fill(false).map((_, i) => i < props.stars / 10 / 2));\r\n</script>\r\n","<template>\r\n  <div class=\"product-card--holder\">\r\n    <BLink v-if=\"isLoggedIn\" class=\"add-to-wishlist\" @click.prevent=\"toggleWishItem\">\r\n      <div class=\"heart\" v-if=\"$store.getters['user/isProductInWishlist'](product.sku)\">\r\n        <img src=\"@/base/assets/heart.png\" alt=\"heart\" />\r\n      </div>\r\n      <i class=\"lnr lnr-heart\" v-else></i>\r\n    </BLink>\r\n    <router-link :to=\"`/${product.url_key}`\" class=\"product-card\" @click=\"trackClick\">\r\n      <div>\r\n        <img\r\n          class=\"product-card--img-top\"\r\n          :class=\"route.name === 'home' ? 'width-unset' : ''\"\r\n          :src=\"mediumImage\"\r\n          :alt=\"product.name\"\r\n          width=\"240\"\r\n          height=\"220\"\r\n          v-if=\"product.image && mediumImage\"\r\n          @error=\"setDefaultPlaceholder\"\r\n        />\r\n        <img\r\n          class=\"product-card--img-top\"\r\n          width=\"240\"\r\n          height=\"220\"\r\n          v-else\r\n          :alt=\"product.name ? product.name : 'Product Card Image'\"\r\n          src=\"@/base/assets/default-placeholder-image.jpg\"\r\n        />\r\n        <div class=\"actionbuttons\">\r\n          <span class=\"sale-txt\" v-if=\"product.sale\">Sale</span>\r\n          <span class=\"new-txt\" v-if=\"product.new\">Nieuw</span>\r\n          <span class=\"empty-txt\" v-if=\"!product.new && !product.sale\"></span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"product-card--product-name\">{{ product.name }}</div>\r\n      <ul\r\n        v-for=\"attr of product.configurable_options\"\r\n        :key=\"attr.id\"\r\n        class=\"available-sizes-list d-none d-md-flex flex-wrap justify-content-center list-unstyled p-0\"\r\n      >\r\n        <li v-for=\"opt of attr.values\" :key=\"opt.value_index\">\r\n          {{ opt.label }}\r\n        </li>\r\n      </ul>\r\n      <ul\r\n        v-if=\"!product.configurable_options\"\r\n        class=\"available-sizes-list d-none d-md-flex flex-wrap justify-content-center list-unstyled p-0\"\r\n      ></ul>\r\n      <div class=\"bottombox\">\r\n        <Rating\r\n          :stars=\"product.rating_summary\"\r\n          :noOfRatings=\"product.review_count\"\r\n          v-if=\"product.review_count > 0\"\r\n        />\r\n        <span v-html=\"getProductPriceRange.text\" class=\"d-block product-card--price\"> </span>\r\n        <span\r\n          class=\"d-block product-card--sale-comment\"\r\n          v-if=\"product.price_range.minimum_price.discount.percent_off > 0\"\r\n        >\r\n          {{ $t(\"discount\") }}\r\n          {{ product.price_range.minimum_price.discount.percent_off.toFixed(0) }}%\r\n        </span>\r\n        <span\r\n          class=\"d-block product-card--sale-comment\"\r\n          style=\"visibility: hidden\"\r\n          v-if=\"product.price_range.minimum_price.discount.percent_off == 0\"\r\n        >\r\n          {{ $t(\"discount\") }}\r\n          {{ product.price_range.minimum_price.discount.percent_off.toFixed(0) }}%\r\n        </span>\r\n        <div :class=\"getBottomMargin\"></div>\r\n      </div>\r\n    </router-link>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, nextTick, onMounted, ref } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport Rating from \"@/base/core/components/Rating.vue\";\r\nimport config from \"@config\";\r\n\r\nconst props = defineProps({\r\n  product: {\r\n    type: Object,\r\n    require: true,\r\n  },\r\n  optionHeight: {\r\n    type: Number,\r\n    require: true,\r\n  },\r\n});\r\n\r\nfunction formatCurrency(amount) {\r\n  const formatter = new Intl.NumberFormat(\"nl-NL\", {\r\n    style: \"currency\",\r\n    currency: \"EUR\",\r\n  });\r\n  return formatter.format(amount);\r\n}\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst store = useStore();\r\nconst { t } = useI18n();\r\n\r\nconst mediumImage = ref(props.product.image.medium);\r\nconst isLoggedIn = computed(() => store.getters[\"user/getIsLoggedIn\"]);\r\n\r\nconst getBottomMargin = computed(() => {\r\n  if (\r\n    (props.product.sale == 1 || props.product.new == 1) &&\r\n    (props.product.price_range.minimum_price.discount.percent_off > 0 ||\r\n      props.product.price_range.maximum_price.discount.percent_off > 0)\r\n  ) {\r\n    return \"m20\";\r\n  } else {\r\n    return \"\";\r\n  }\r\n});\r\n\r\nconst productConfig = computed(() => {\r\n  return { variants: props.product.variants };\r\n});\r\n\r\n// const awSource = computed(() => {\r\n//   return store.getters[\"home/getAwSource\"];\r\n// });\r\n\r\nconst getProductPriceRange = computed(() => {\r\n  if (props.product.__typename == \"SimpleProduct\") {\r\n    return {\r\n      text:\r\n        '<span class=\"currentPrice\">' +\r\n        formatCurrency(props.product.price_range.maximum_price.final_price.value) +\r\n        \"</span>\",\r\n      discountType: 1,\r\n    };\r\n  } else if (props.product.__typename == \"BundleProduct\") {\r\n    let lowestPrice = props.product.price_range.minimum_price.final_price.value;\r\n    let highestPrice = props.product.price_range.maximum_price.final_price.value;\r\n    if (lowestPrice == highestPrice) {\r\n      if (lowestPrice === props.product.price_range.maximum_price.regular_price.value) {\r\n        // Return only the current price if both conditions are met\r\n        return {\r\n          text:\r\n            '<span class=\"currentPrice\">' +\r\n            formatCurrency(props.product.price_range.maximum_price.final_price.value) +\r\n            \"</span>\",\r\n          discountType: 1,\r\n        };\r\n      } else {\r\n        // Return both strike-through and current price if only lowestPrice === highestPrice\r\n        return {\r\n          text:\r\n            '<span class=\"strike\">' +\r\n            formatCurrency(props.product.price_range.maximum_price.regular_price.value) +\r\n            '</span> <span class=\"currentPrice\">' +\r\n            formatCurrency(lowestPrice) +\r\n            \"</span>\",\r\n          discountType: 1,\r\n        };\r\n      }\r\n    } else {\r\n      return {\r\n        text:\r\n          '<span class=\"currentPrice\">' +\r\n          formatCurrency(lowestPrice) +\r\n          \" - \" +\r\n          formatCurrency(highestPrice) +\r\n          \"</span>\",\r\n        discountType: 2,\r\n      };\r\n    }\r\n  } else {\r\n    if (productConfig.value) {\r\n      let lowestPrice = props.product.price_range.maximum_price.regular_price.value;\r\n      let highestPrice = props.product.price_range.minimum_price.final_price.value;\r\n      if (productConfig.value.variants) {\r\n        productConfig.value.variants.forEach((v) => {\r\n          if (v.product.price_range.minimum_price.final_price.value < lowestPrice) {\r\n            lowestPrice = v.product.price_range.minimum_price.final_price.value;\r\n          }\r\n          if (v.product.price_range.maximum_price.final_price.value > highestPrice) {\r\n            highestPrice = v.product.price_range.maximum_price.final_price.value;\r\n          }\r\n        });\r\n      }\r\n      if (\r\n        lowestPrice == highestPrice &&\r\n        lowestPrice !== props.product.price_range.maximum_price.regular_price.value\r\n      ) {\r\n        return {\r\n          text:\r\n            '<span class=\"strike\">' +\r\n            formatCurrency(props.product.price_range.maximum_price.regular_price.value) +\r\n            '</span> <span class=\"currentPrice\">' +\r\n            formatCurrency(lowestPrice) +\r\n            \"</span>\",\r\n          discountType: 1,\r\n        };\r\n      } else if (lowestPrice !== highestPrice) {\r\n        return {\r\n          text:\r\n            '<span class=\"currentPrice\">' +\r\n            formatCurrency(lowestPrice) +\r\n            \" / \" +\r\n            formatCurrency(highestPrice) +\r\n            \"</span>\",\r\n          discountType: 2,\r\n        };\r\n      } else {\r\n        return {\r\n          text: '<span class=\"currentPrice\">' + formatCurrency(lowestPrice) + \"</span>\",\r\n          discountType: 1,\r\n        };\r\n      }\r\n    } else {\r\n      return 1;\r\n    }\r\n  }\r\n});\r\n\r\nfunction toggleWishItem() {\r\n  if (store.getters[\"user/getIsLoggedIn\"] == true) {\r\n    if (store.getters[\"user/isProductInWishlist\"](props.product.sku) == true) {\r\n      store.dispatch(\"user/setProductWishlistStatus\", {\r\n        sku: props.product.sku,\r\n        parentSku: null,\r\n        store: store,\r\n      });\r\n    } else {\r\n      if (props.product.__typename == \"SimpleProduct\") {\r\n        store.dispatch(\"user/setProductWishlistStatus\", {\r\n          sku: props.product.sku,\r\n          parentSku: null,\r\n          store: store,\r\n        });\r\n      } else {\r\n        const msg = {\r\n          type: \"danger\",\r\n          title: t(\"wishlist error\"),\r\n          text: t(\"wishlist_select_options\"),\r\n        };\r\n        store.dispatch(\"messages/sendMessage\", { message: msg });\r\n        router.push(\"/\" + props.product.url_key);\r\n      }\r\n    }\r\n  } else {\r\n    const msg = {\r\n      type: \"danger\",\r\n      title: t(\"wishlist error\"),\r\n      text: t(\"wishlist_logged_in\"),\r\n    };\r\n    store.dispatch(\"messages/sendMessage\", { message: msg });\r\n  }\r\n}\r\n\r\nfunction setDefaultPlaceholder() {\r\n  mediumImage.value = null;\r\n}\r\n\r\nfunction trackClick() {\r\n  if (typeof window !== \"undefined\") {\r\n    if (config.helloRetail && config.helloRetail.enabled) {\r\n      const aw_source = JSON.parse(localStorage.getItem(\"aw_source\")) ?? [];\r\n      const found = aw_source.find(({ sku }) => sku == props.product.sku);\r\n      const hrq = window.hrq || [];\r\n      hrq.push([\"trackClick\", found?.aw_source]);\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nonMounted(() => {\r\n  nextTick(() => {\r\n    const maxHeight = Math.max(\r\n      ...(Array.from(document.querySelectorAll(`.available-sizes-list`))?.map((ele) =>\r\n        Number(ele.offsetHeight)\r\n      ) || [])\r\n    );\r\n    document.querySelectorAll(`.available-sizes-list`)?.forEach((ele) => {\r\n      ele.style.minHeight = maxHeight + \"px\";\r\n    });\r\n  });\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.product-card--img-top {\r\n  max-width: -webkit-fill-available;\r\n}\r\n\r\n.width-unset {\r\n  width: unset !important;\r\n}\r\n</style>\r\n"],"names":["config"],"mappings":"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"}