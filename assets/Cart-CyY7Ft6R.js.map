{"version":3,"file":"Cart-CyY7Ft6R.js","sources":["../../../src/base/core/views/Cart.vue"],"sourcesContent":["<template>\r\n  <BaseLayout wrapperClass=\"cart\">\r\n    <Breadcrumbs />\r\n    <section class=\"cart pt-8\">\r\n      <BContainer>\r\n        <span class=\"page-title font-weight-normal d-none d-md-block mb-8\">{{\r\n          $t(\"shopping_basket\")\r\n        }}</span>\r\n        <div class=\"d-flex justify-content-between align-items-center cart-info-and-btn\">\r\n          <div\r\n            class=\"items-info font-weight-normal d-block text-blue\"\r\n            v-html=\"getItemsInCart\"\r\n          ></div>\r\n          <div class=\"options ml-20 d-none d-md-block\">\r\n            <BLink href=\"/\">{{ $t(\"continue_shopping\") }}</BLink>\r\n            <BButton\r\n              @click=\"$router.push('/checkout')\"\r\n              variant=\"info\"\r\n              class=\"text-light py-6 pr-20 pl-15\"\r\n              ><i class=\"lnr lnr-cart me-15\"></i\r\n              ><i class=\"fa fa-check-circle bg-info me-5 mt-2\"></i> >{{\r\n                $t(\"continue_buying\")\r\n              }}</BButton\r\n            >\r\n          </div>\r\n        </div>\r\n        <BRow\r\n          v-for=\"cartItem of cartItems\"\r\n          :key=\"cartItem.id\"\r\n          class=\"cart-item-row position-relative\"\r\n        >\r\n          <BLink href=\"#\" class=\"d-md-none mobile-cart-item-remove\"\r\n            ><i class=\"lnr lnr-cross\"></i\r\n          ></BLink>\r\n          <BCol md=\"8\" class=\"d-flex\">\r\n            <div\r\n              class=\"img\"\r\n              :style=\"{\r\n                backgroundImage: `url(${cartItem.product.image.medium})`,\r\n              }\"\r\n            ></div>\r\n            <div\r\n              class=\"d-flex flex-column flex-md-row justify-content-between align-items-md-center flex-grow-1\"\r\n            >\r\n              <div class=\"product text-blue pb-2 pb-md-10\">\r\n                <span class=\"product--name\">{{ cartItem.product.name }}</span>\r\n                <div v-if=\"typeof cartItem.configurable_options != 'undefined'\">\r\n                  <div\r\n                    v-for=\"(option, index) of cartItem.configurable_options\"\r\n                    :key=\"index\"\r\n                    class=\"d-flex align-items-center mb-7\"\r\n                  >\r\n                    <span class=\"size\">{{ option.option_label }}: </span>\r\n                    <span class=\"size-box\">{{ option.value_label }}</span>\r\n                    <span\r\n                      :style=\"\r\n                        'color: ' + cartItem.configured_variant.DeliveryTime.color + ' !important'\r\n                      \"\r\n                      class=\"deliverytime\"\r\n                      v-if=\"typeof cartItem.configured_variant.DeliveryTime !== undefined\"\r\n                      >{{ cartItem.configured_variant.DeliveryTime.long }}</span\r\n                    >\r\n                    <span class=\"product--price text-blue d-md-none ms-20 config\">{{\r\n                      formatCurrency(cartItem.prices.row_total_including_tax.value)\r\n                    }}</span>\r\n                  </div>\r\n                  <BLink\r\n                    class=\"change-price text-blue d-none d-md-inline-block\"\r\n                    @click=\"updateCartProduct(cartItem)\"\r\n                    >{{ $t(\"click_to_change_options\") }}</BLink\r\n                  >\r\n                </div>\r\n                <div v-if=\"typeof cartItem.configurable_options == 'undefined'\">\r\n                  <span\r\n                    :style=\"'color: ' + cartItem.product.DeliveryTime.color + ' !important'\"\r\n                    class=\"deliverytime\"\r\n                    v-if=\"typeof cartItem.product.DeliveryTime !== undefined\"\r\n                    >{{ cartItem.product.DeliveryTime.long }}</span\r\n                  >\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"quantity-input d-flex ml-md-20\">\r\n                <router-link\r\n                  href=\"#\"\r\n                  class=\"step-down-btn\"\r\n                  @click=\"quantityDown(cartItem.id, cartItem.quantity)\"\r\n                ></router-link>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  :value=\"cartItem.quantity\"\r\n                  name=\"quantity\"\r\n                  ref=\"inputQuantity\"\r\n                  disabled\r\n                />\r\n                <router-link\r\n                  href=\"#\"\r\n                  class=\"step-up-btn\"\r\n                  @click=\"quantityUp(cartItem.id, cartItem.quantity)\"\r\n                ></router-link>\r\n              </div>\r\n            </div>\r\n          </BCol>\r\n          <BCol\r\n            md=\"4\"\r\n            class=\"d-none d-md-flex align-items-center justify-content-center position-relative pr-55\"\r\n          >\r\n            <span class=\"product--price\"\r\n              >&nbsp;{{ formatCurrency(cartItem.prices.row_total_including_tax.value) }}</span\r\n            >\r\n            <router-link\r\n              href=\"#\"\r\n              @click=\"removeItem(cartItem.id)\"\r\n              class=\"lnr lnr-cross\"\r\n            ></router-link>\r\n          </BCol>\r\n        </BRow>\r\n        <BRow class=\"discount-and-total\">\r\n          <BCol md=\"5\" lg=\"4\" class=\"coupon-discount\">\r\n            <span class=\"d-block\">{{ $t(\"coupon_discount\") }}</span>\r\n            <form action=\"#\" class=\"d-flex\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"flex-grow-1\"\r\n                name=\"discount-code\"\r\n                :placeholder=\"$t('fill_out_discount_code')\"\r\n                v-model=\"couponCode\"\r\n              />\r\n              <BButton @click=\"addCoupon\" variant=\"info\">{{ $t(\"apply\") }}</BButton>\r\n            </form>\r\n            <div\r\n              v-if=\"appliedCouponCodes && appliedCouponCodes[0] && appliedCouponCodes[0].code\"\r\n              class=\"pt-10\"\r\n            >\r\n              {{ $t(\"applied_coupon_code\") }}:\r\n              {{ appliedCouponCodes[0].code }}\r\n              <router-link href=\"#\" @click=\"removeCouponCode()\" class=\"lnr lnr-cross\"></router-link>\r\n            </div>\r\n            <div class=\"free_shipping\">\r\n              {{\r\n                $t(\"free_shipping_msg\", {\r\n                  remain: formatCurrency(freeShippingAmount),\r\n                })\r\n              }}\r\n            </div>\r\n          </BCol>\r\n          <BCol md=\"6\" xl=\"5\" offset-md=\"1\" offset-lg=\"2\" offset-xl=\"3\" class=\"cost\">\r\n            <span class=\"cost-heading font-weight-normal d-block\">{{ $t(\"totals\") }}</span>\r\n            <ul class=\"prices\">\r\n              <li v-if=\"defaultShipping != null\" class=\"d-flex justify-content-between\">\r\n                <span class=\"name\"\r\n                  >{{ $t(\"shipping_cost\") }} {{ defaultShipping.carrier_title }}</span\r\n                >\r\n                <span v-if=\"typeof defaultShipping.amount != 'undefined'\" class=\"cost ml-10\">{{\r\n                  formatCurrency(defaultShipping.amount.value)\r\n                }}</span>\r\n              </li>\r\n              <li\r\n                class=\"d-flex justify-content-between\"\r\n                v-for=\"(discount, index) in cartTotalDiscounts\"\r\n                :key=\"index\"\r\n              >\r\n                <span class=\"name\">{{ discount.label }}</span>\r\n                <span class=\"cost ml-10\">- {{ formatCurrency(discount.amount.value) }}</span>\r\n              </li>\r\n              <li\r\n                class=\"d-flex justify-content-between\"\r\n                v-for=\"(price, index) in cartTotalTaxPrices\"\r\n                :key=\"index\"\r\n              >\r\n                <span class=\"name\">{{ price.label }}</span>\r\n                <span class=\"cost ml-10\">{{ formatCurrency(price.amount.value) }}</span>\r\n              </li>\r\n            </ul>\r\n            <div class=\"d-flex justify-content-between align-items-center mb-25\">\r\n              <span class=\"total\">{{ $t(\"total\") }}</span>\r\n              <span class=\"total-price ml-10 text-light-blue\">{{\r\n                formatCurrency(cartTotalPrice)\r\n              }}</span>\r\n            </div>\r\n            <div class=\"time-delivery\" v-if=\"getCartDeliveryTime\">\r\n              {{ $t(\"estimated_shipping_time\") }}:\r\n              <span :style=\"'color: ' + getCartDeliveryTime.color + ' !important'\">{{\r\n                getCartDeliveryTime.long\r\n              }}</span>\r\n            </div>\r\n            <div class=\"d-flex justify-content-between align-items-center\">\r\n              <BLink to=\"/\" class=\"mr-15 d-md-none link-underline\">{{\r\n                $t(\"continue_shopping\")\r\n              }}</BLink>\r\n              <BButton\r\n                @click=\"$router.push('/checkout')\"\r\n                variant=\"info\"\r\n                class=\"text-light py-6 pr-20 pl-15\"\r\n                >><i class=\"lnr lnr-cart me-15\"></i\r\n                ><i class=\"fa fa-check-circle bg-info me-5 mt-2\"></i>\r\n                {{ $t(\"continue_buying\") }}</BButton\r\n              >\r\n            </div>\r\n          </BCol>\r\n        </BRow>\r\n      </BContainer>\r\n    </section>\r\n    <section class=\"more-products\" v-if=\"getCrossSellProducts && getCrossSellProducts.length > 0\">\r\n      <div class=\"container\">\r\n        <span class=\"section-title d-block font-weight-normal text-center\"\r\n          >Klanten bestelden ook</span\r\n        >\r\n        <div v-if=\"!isServer\">\r\n          <MoreProductsCarousel\r\n            class=\"pt-5\"\r\n            :products=\"getCrossSellProducts\"\r\n            :useBreakPoint=\"true\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </BaseLayout>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useRouter } from \"vue-router\";\r\nimport BaseLayout from \"@/base/core/components/common/BaseLayout\";\r\nimport Breadcrumbs from \"@/base/core/components/Breadcrumbs\";\r\nimport MoreProductsCarousel from \"@/base/core/components/MoreProductsCarousel\";\r\nimport config from \"@config\";\r\nimport { useCartInfo } from \"@storefront/core/composable/cart\";\r\n\r\nconst {\r\n  cartCount,\r\n  removeItem,\r\n  cartItems,\r\n  cartTotalPrice,\r\n  cartTotalTaxPrices,\r\n  cartTotalDiscounts,\r\n  defaultShipping,\r\n  quantityDown,\r\n  quantityUp,\r\n} = useCartInfo();\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\nconst { t } = useI18n();\r\n\r\n// Check if the code is running on the server\r\nconst isServer = typeof window === \"undefined\";\r\n\r\nconst couponCode = ref(\"\");\r\n\r\n// Computed properties\r\nconst freeShippingAmount = computed(() => store.getters[\"cart/getFreeShippingAmount\"]);\r\n\r\nconst getItemsInCart = computed(() => {\r\n  let items = t(\"items_in_cart\", { numberOf: cartCount.value });\r\n  items = '<i class=\"lnr lnr-cart me-7\"></i>' + items.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\r\n  return items;\r\n});\r\n\r\nconst getCartDeliveryTime = computed(() => store.getters[\"cart/getCartDeliveryTime\"]);\r\nconst appliedCouponCodes = computed(() => store.getters[\"cart/getAppliedCouponCodes\"]);\r\n\r\nconst getCrossSellProducts = ref([]);\r\n\r\n// Methods\r\nconst addCoupon = async () => {\r\n  if (couponCode.value !== \"\") {\r\n    const retval = await store.dispatch(\"cart/addCouponCode\", {\r\n      code: couponCode.value,\r\n      store: store,\r\n    });\r\n    if (retval === true) {\r\n      const msg = {\r\n        type: \"success\",\r\n        title: t(\"coupon_code\"),\r\n        text: t(\"coupon_code_ok\", { code: couponCode.value }),\r\n      };\r\n      store.dispatch(\"messages/sendMessage\", { message: msg });\r\n      // appliedCouponCode.value = couponCode.value;\r\n      couponCode.value = \"\";\r\n    }\r\n  }\r\n};\r\n\r\n// const getCartItemUrl = (url_key) => `/${url_key}`;\r\n\r\nconst updateCartProduct = (product) => {\r\n  removeItem(product.id);\r\n  router.push(`/${product.product.url_key}`);\r\n};\r\n\r\nconst formatCurrency = (value) => {\r\n  return new Intl.NumberFormat(\"nl-NL\", { style: \"currency\", currency: \"EUR\" }).format(value);\r\n};\r\n\r\nconst removeCouponCode = async () => {\r\n  await store.dispatch(\"cart/removeCouponCode\", { store });\r\n};\r\n\r\nconst updateCrossSellProducts = async () => {\r\n  const skuList = cartItems.value?.map((item) => item.product.sku);\r\n  if (config.helloRetail && config.helloRetail.enabled) {\r\n    await store.dispatch(\"sale/loadCrossSellProducts\", { skus: skuList });\r\n  } else {\r\n    await store.dispatch(\"sale/loadCrossSellForCart\", { skus: skuList });\r\n  }\r\n  setTimeout(() => {\r\n    getCrossSellProducts.value = store.getters[\"sale/getCrossSellProducts\"];\r\n  }, 2000);\r\n};\r\n\r\nwatch(\r\n  () => cartItems.value,\r\n  () => {\r\n    updateCrossSellProducts();\r\n  }\r\n);\r\n\r\n// Lifecycle hooks\r\nonMounted(() => {\r\n  updateCrossSellProducts();\r\n});\r\n</script>\r\n"],"names":["config"],"mappings":"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"}