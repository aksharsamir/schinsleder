{"version":3,"file":"Cart-rHIXsIGB.js","sources":["../../../src/esf_thehague_schinsleder/core/views/Cart.vue"],"sourcesContent":["<template>\r\n    <AppLayout wrapperClass=\"cart\">\r\n        <Breadcrumbs />\r\n        <section class=\"cart pt-0 p-15\">\r\n            <span class=\"cart-title  mb-8 fw-bold\">{{\r\n                $t(\"Checkout\")\r\n            }}</span>\r\n            <!-- <div class=\"d-flex justify-content-between align-items-center cart-info-and-btn\">\r\n            <div\r\n              class=\"items-info font-weight-normal d-block text-blue\"\r\n              v-html=\"getItemsInCart\"\r\n            ></div>\r\n            <div class=\"options ml-20 d-none d-md-block\">\r\n              <BLink href=\"/\">{{ $t(\"continue_shopping\") }}</BLink>\r\n              <BButton\r\n                @click=\"$router.push('/checkout')\"\r\n                variant=\"info\"\r\n                class=\"text-light py-6 pr-20 pl-15\"\r\n                ><i class=\"lnr lnr-cart me-15\"></i\r\n                ><i class=\"fa fa-check-circle bg-info me-5 mt-2\"></i> >{{\r\n                  $t(\"continue_buying\")\r\n                }}</BButton\r\n              >\r\n            </div>\r\n          </div> -->\r\n            <div class=\"d-md-flex d-none  checkout-name col mt-10\">\r\n                <span class=\"col-6\">{{ $t(\"article\") }}</span>\r\n                <span class=\"col-2  ps-10\">{{ $t(\"number\") }}</span>\r\n                <span class=\"col-2 text-center\">{{ $t(\"unit_price\") }}</span>\r\n                <span class=\"col-2 text-end pe-5\">{{ $t(\"total_price\") }}</span>\r\n            </div>\r\n            <BRow v-for=\"cartItem of cartItems\" :key=\"cartItem.id\" class=\"cart-item-row position-relative m-0 mt-5\">\r\n                <!-- <BLink href=\"#\" class=\"d-md-none mobile-cart-item-remove\"><i class=\"lnr lnr-cross\"></i></BLink> -->\r\n                <BCol md=\"8\" class=\"d-flex p-0 p-sm-5\">\r\n                    <div class=\"img\" :style=\"{\r\n                        backgroundImage: `url(${cartItem.product.image.medium})`,\r\n                    }\"></div>\r\n                    <div class=\"d-flex flex-column flex-md-row justify-content-between  flex-grow-1\">\r\n                        <div class=\"product\">\r\n                            <span class=\"product--name lh-1 mb-0\">{{ cartItem.product.name }}</span>\r\n                            <div v-if=\"typeof cartItem.configurable_options != 'undefined'\">\r\n                                <div v-for=\"(option, index) of cartItem.configurable_options\" :key=\"index\"\r\n                                    class=\"d-flex align-items-center mb-7\">\r\n                                    <span class=\"size\">{{ option.option_label }}: </span>\r\n                                    <span class=\"size-box\">{{ option.value_label }}</span>\r\n                                    <span :style=\"'color: ' + cartItem.configured_variant.DeliveryTime.color + ' !important'\r\n                                        \" class=\"deliverytime\"\r\n                                        v-if=\"typeof cartItem.configured_variant.DeliveryTime !== undefined\">{{\r\n                                            cartItem.configured_variant.DeliveryTime.long }}</span>\r\n                                    <span class=\"product--price text-blue d-md-none ms-20 config\">{{\r\n                                        formatCurrency(cartItem.prices.row_total_including_tax.value)\r\n                                    }}</span>\r\n                                </div>\r\n                                <BLink class=\"change-price text-blue d-none d-md-inline-block\"\r\n                                    @click=\"updateCartProduct(cartItem)\">{{ $t(\"click_to_change_options\") }}</BLink>\r\n                            </div>\r\n                            <div v-if=\"typeof cartItem.configurable_options == 'undefined'\">\r\n                                <span :style=\"'color: ' + cartItem.product.DeliveryTime?.color + ' !important'\"\r\n                                    class=\"deliverytime\" v-if=\"typeof cartItem.product.DeliveryTime !== undefined\">{{\r\n                                        cartItem.product.DeliveryTime?.long }}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"d-flex justify-content-between\">\r\n                            <div class=\"d-flex quantity-and-btn\">\r\n                                <div class=\"quantity-input d-flex \">\r\n                                    <input type=\"text\" min=\"1\" :value=cartItem.quantity pattern=\"[0-9]+\" name=\"quantity\"\r\n                                        ref=\"inputQuantity\" disabled />\r\n                                    <BButton variant=\"secondary\" class=\"quan-btn p-8 pt-1 pb-1 text-white\"\r\n                                        @click.revent=\"quantityDown\">-</BButton>\r\n                                    <BButton variant=\"secondary\" class=\" quan-btn p-8 pt-1 pb-1 text-white\"\r\n                                        @click.prevent=\"quantityUp\">\r\n                                        +</BButton>\r\n                                </div>\r\n                            </div>\r\n                            <span class=\"product--price text-end  d-md-none mt-4\">&nbsp;{{\r\n                                formatCurrency(cartItem.prices.row_total_including_tax.value) }}</span>\r\n                        </div>\r\n                    </div>\r\n                </BCol>\r\n\r\n                <BCol md=\"2\" class=\"d-none d-md-block  p-0 text-center\">\r\n                    <span class=\"product--price\">&nbsp;{{\r\n                        formatCurrency(cartItem.prices.row_total_including_tax.value) }}</span>\r\n                    <!-- <router-link href=\"#\" @click=\"removeItem(cartItem.id)\" class=\"lnr lnr-cross cart-cross\"></router-link> -->\r\n                    <!-- <span class=\"product--price col-2\">&nbsp;{{ formatCurrency(cartItem.prices.row_total_including_tax.value)}}</span> -->\r\n                </BCol>\r\n\r\n                <BCol md=\"2\" class=\"d-none d-md-block  p-0 pe-5 text-end\">\r\n                    <!-- <span class=\"product--price col-2\">&nbsp;{{ formatCurrency(cartItem.prices.row_total_including_tax.value)}}</span> -->\r\n                    <!-- <router-link href=\"#\" @click=\"removeItem(cartItem.id)\" class=\"lnr lnr-cross cart-cross\"></router-link> -->\r\n                    <span class=\"product--price\">&nbsp;{{\r\n                        formatCurrency(cartItem.prices.row_total_including_tax.value) }}</span>\r\n                </BCol>\r\n            </BRow>\r\n            <BRow class=\"discount-and-total\">\r\n                <BCol md=\"5\" lg=\"4\" class=\"coupon-discount\">\r\n                    <!-- <span class=\"d-block\">{{ $t(\"coupon_discount\") }}</span> -->\r\n\r\n                    <span class=\"lnr lnr-trash trash-icon\"></span>\r\n                    <span class=\"trash-name\"> {{ $t(\"delete_everything\") }}</span>\r\n                    <!-- <form action=\"#\" class=\"d-flex\">\r\n                        <input type=\"text\" class=\"flex-grow-1\" name=\"discount-code\"\r\n                            :placeholder=\"$t('fill_out_discount_code')\" v-model=\"couponCode\" />\r\n                        <BButton @click=\"addCoupon\" variant=\"info\">{{ $t(\"apply\") }}</BButton>\r\n                    </form>\r\n                    <div v-if=\"appliedCouponCodes && appliedCouponCodes[0] && appliedCouponCodes[0].code\" class=\"pt-10\">\r\n                        {{ $t(\"applied_coupon_code\") }}:\r\n                        {{ appliedCouponCodes[0].code }}\r\n                        <router-link href=\"#\" @click=\"removeCouponCode()\" class=\"lnr lnr-cross\"></router-link>\r\n                    </div>\r\n                    <div class=\"free_shipping\">\r\n                        {{\r\n                            $t(\"free_shipping_msg\", {\r\n                                remain: formatCurrency(freeShippingAmount),\r\n                            })\r\n                        }}\r\n                    </div> -->\r\n                </BCol>\r\n                <BCol md=\"6\" xl=\"5\" offset-md=\"1\" offset-lg=\"2\" offset-xl=\"3\" class=\"cost\">\r\n                    <div class=\"d-flex justify-content-end align-items-center gap-25\">\r\n                        <span class=\"subtotal-heading d-block pb-0\">{{ $t(\"sub_total\") }}</span>\r\n                        <span class=\"subtotal-price\">{{\r\n                            formatCurrency(cartSubTotalPrice)\r\n                        }}</span>\r\n                    </div>\r\n                    <ul class=\"prices\">\r\n                        <li v-if=\"defaultShipping != null\" class=\"d-flex justify-content-end gap-25\">\r\n                            <span class=\"name\">{{ $t(\"shipping_cost\") }}</span>\r\n                            <span v-if=\"typeof defaultShipping.amount != 'undefined'\" class=\"subtotal-price ml-10\">{{\r\n                                formatCurrency(defaultShipping.amount.value)\r\n                            }}</span>\r\n                        </li>\r\n                        <li class=\"d-flex justify-content-end \" v-for=\"(discount, index) in cartTotalDiscounts\"\r\n                            :key=\"index\">\r\n                            <span class=\"name\">{{ discount.label }}</span>\r\n                            <span class=\"cost ml-10\">- {{ formatCurrency(discount.amount.value) }}</span>\r\n                        </li>\r\n                        <li class=\"d-flex justify-content-end gap-25\" v-for=\"(price, index) in cartTotalTaxPrices\"\r\n                            :key=\"index\">\r\n                            <span class=\"name\">{{ price.label }}</span>\r\n                            <span class=\"cost ml-10 \">{{ formatCurrency(price.amount.value) }}</span>\r\n                        </li>\r\n                    </ul>\r\n                    <hr class=\"w-75  hr-line-total\">\r\n                    <div class=\"d-flex justify-content-end align-items-center gap-25 mb-5\">\r\n                        <span class=\"subtotal-heading fw-bold\">{{ $t(\"total\") }}</span>\r\n                        <span class=\"subtotal-price ml-10 \">{{\r\n                            formatCurrency(cartTotalPrice)\r\n                        }}</span>\r\n                    </div>\r\n                    \r\n                    <div class=\"time-delivery\" v-if=\"getCartDeliveryTime\">\r\n                        {{ $t(\"estimated_shipping_time\") }}:\r\n                        <span :style=\"'color: ' + getCartDeliveryTime.color + ' !important'\">{{\r\n                            getCartDeliveryTime.long\r\n                        }}</span>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-end align-items-center \">\r\n                        <!-- <BLink to=\"/\" class=\"mr-15 d-md-none link-underline\">{{\r\n                            $t(\"continue_shopping\")\r\n                        }}</BLink> -->\r\n                        <BButton @click=\"$router.push('/checkout')\"  class=\"text-light py-4 order-button\">\r\n                            <!-- ><i class=\"lnr lnr-cart me-15\"></i><i class=\"fa fa-check-circle bg-info me-5 mt-2\"></i> -->\r\n                            {{ $t(\"Complete_order\") }}</BButton>\r\n                    </div>\r\n                </BCol>\r\n            </BRow>\r\n        </section>\r\n        <section class=\"more-products\" v-if=\"getCrossSellProducts && getCrossSellProducts.length > 0\">\r\n            <div class=\"\">\r\n                <span class=\"section-title d-block font-weight-normal text-center\">Klanten bestelden ook</span>\r\n                <div v-if=\"!isServer\">\r\n                    <MoreProductsCarousel class=\"pt-5\" :products=\"getCrossSellProducts\" :useBreakPoint=\"true\" />\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </AppLayout>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useRouter } from \"vue-router\";\r\nimport AppLayout from \"@/esf_thehague_schinsleder/core/components/AppLayout\";\r\nimport Breadcrumbs from \"@/esf_thehague_schinsleder/core/components/Breadcrumbs\";\r\nimport MoreProductsCarousel from \"@/base/core/components/MoreProductsCarousel\";\r\nimport config from \"@config\";\r\nimport { useCartInfo } from \"@storefront/core/composable/cart\";\r\n\r\nconst { cartCount, removeItem, cartItems, cartTotalPrice, cartTotalTaxPrices, cartTotalDiscounts,    defaultShipping,    quantityDown,    quantityUp, cartSubTotalPrice} = useCartInfo();\r\nconst router = useRouter();\r\nconst store = useStore();\r\nconst { t } = useI18n();\r\n\r\n// Check if the code is running on the server\r\nconst isServer = typeof window === \"undefined\";\r\n\r\nconst couponCode = ref(\"\");\r\n\r\n// Computed properties\r\nconst freeShippingAmount = computed(() => store.getters[\"cart/getFreeShippingAmount\"]);\r\n\r\nconst getItemsInCart = computed(() => {\r\n    let items = t(\"items_in_cart\", { numberOf: cartCount.value });\r\n    items = '<i class=\"lnr lnr-cart me-7\"></i>' + items.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\r\n    return items;\r\n});\r\n\r\nconst getCartDeliveryTime = computed(() => store.getters[\"cart/getCartDeliveryTime\"]);\r\nconst appliedCouponCodes = computed(() => store.getters[\"cart/getAppliedCouponCodes\"]);\r\n\r\nconst getCrossSellProducts = ref([]);\r\n\r\n// Methods\r\nconst addCoupon = async () => {\r\n    if (couponCode.value !== \"\") {\r\n        const retval = await store.dispatch(\"cart/addCouponCode\", {\r\n            code: couponCode.value,\r\n            store: store,\r\n        });\r\n        if (retval === true) {\r\n            const msg = {\r\n                type: \"success\",\r\n                title: t(\"coupon_code\"),\r\n                text: t(\"coupon_code_ok\", { code: couponCode.value }),\r\n            };\r\n            store.dispatch(\"messages/sendMessage\", { message: msg });\r\n            // appliedCouponCode.value = couponCode.value;\r\n            couponCode.value = \"\";\r\n        }\r\n    }\r\n};\r\n\r\n// const getCartItemUrl = (url_key) => `/${url_key}`;\r\n\r\nconst updateCartProduct = (product) => {\r\n    removeItem(product.id);\r\n    router.push(`/${product.product.url_key}`);\r\n};\r\n\r\nconst formatCurrency = (value) => {\r\n    return new Intl.NumberFormat(\"nl-NL\", { style: \"currency\", currency: \"EUR\" }).format(value);\r\n};\r\n\r\nconst removeCouponCode = async () => {\r\n    await store.dispatch(\"cart/removeCouponCode\", { store });\r\n};\r\n\r\nconst updateCrossSellProducts = async () => {\r\n    const skuList = cartItems.value?.map((item) => item.product.sku);\r\n    if (config.helloRetail && config.helloRetail.enabled) {\r\n        await store.dispatch(\"sale/loadCrossSellProducts\", { skus: skuList });\r\n    } else {\r\n        await store.dispatch(\"sale/loadCrossSellForCart\", { skus: skuList });\r\n    }\r\n    setTimeout(() => {\r\n        getCrossSellProducts.value = store.getters[\"sale/getCrossSellProducts\"];\r\n    }, 2000);\r\n};\r\n\r\nwatch(\r\n    () => cartItems.value,\r\n    () => {\r\n        updateCrossSellProducts();\r\n    }\r\n);\r\n\r\n// Lifecycle hooks\r\nonMounted(() => {\r\n    const bcrumb = { current: t(\"cart\"), routes: [] };\r\n    store.commit(\"breadcrumbs/set\", bcrumb);\r\n    updateCrossSellProducts();\r\n});\r\n</script>"],"names":["config"],"mappings":"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"}